<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-sinks/grpc-sink">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v0.0.0-5124">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XXX"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-XXX",{})</script><title data-rh="true">GRPC | Firehose</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://goto.github.io//firehose/sinks/grpc-sink"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="GRPC | Firehose"><meta data-rh="true" name="description" content="gRPC is a modern open source high performance Remote Procedure Call framework that can run in any environment."><meta data-rh="true" property="og:description" content="gRPC is a modern open source high performance Remote Procedure Call framework that can run in any environment."><link data-rh="true" rel="icon" href="/firehose/assets/favicon.ico"><link data-rh="true" rel="canonical" href="https://goto.github.io//firehose/sinks/grpc-sink"><link data-rh="true" rel="alternate" href="https://goto.github.io//firehose/sinks/grpc-sink" hreflang="en"><link data-rh="true" rel="alternate" href="https://goto.github.io//firehose/sinks/grpc-sink" hreflang="x-default"><link rel="stylesheet" href="/firehose/assets/css/styles.620b4533.css">
<link rel="preload" href="/firehose/assets/js/runtime~main.83b03c8d.js" as="script">
<link rel="preload" href="/firehose/assets/js/main.0a799d77.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#222;color:#eee" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="announcementBarContent_xLdY">⭐️ If you like Firehose, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/goto/firehose">GitHub</a>! ⭐</div><button type="button" class="clean-btn close announcementBarClose_gvF7" aria-label="Close"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/firehose/"><div class="navbar__logo"><img src="/firehose/firehose.png" alt="Firehose" class="themedImage_ToTc themedImage--light_HNdA"><img src="/firehose/firehose.png" alt="Firehose" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Firehose</b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/firehose/">Documentation</a><a class="navbar__item navbar__link" href="/firehose/support">Support</a><a href="https://bit.ly/2RzPbtn" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-slack-link"></a><a href="https://github.com/goto/firehose" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-item-github"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/firehose/"><img src="/firehose/firehose.png" alt="Firehose" class="themedImage_ToTc themedImage--light_HNdA"><img src="/firehose/firehose.png" alt="Firehose" class="themedImage_ToTc themedImage--dark_i4oU"><b>Firehose</b></a><nav class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/firehose/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/firehose/guides/create_firehose">Guides</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/firehose/guides/create_firehose">Creating Firehose</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/firehose/guides/json-based-filters">JSON-based Filters</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/firehose/guides/jexl-based-filters">JEXL-based Filters</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/firehose/guides/deployment">Deployment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/firehose/guides/manage">Troubleshooting</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/firehose/sinks/httpv2-sink">Sinks</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/firehose/sinks/httpv2-sink">HttpV2 Sink</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/firehose/sinks/http-sink">HTTP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/firehose/sinks/grpc-sink">GRPC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/firehose/sinks/jdbc-sink">JDBC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/firehose/sinks/bigquery-sink">BigQuery</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/firehose/sinks/influxdb-sink">InfluxDB</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/firehose/sinks/prometheus-sink">Prometheus</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/firehose/sinks/mongo-sink">MongoDB</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/firehose/sinks/redis-sink">Redis Sink</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/firehose/sinks/elasticsearch-sink">Elasticsearch</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/firehose/sinks/blob-sink">Blob</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/firehose/concepts/overview">Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/firehose/advance/generic">Advance</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/firehose/reference/metrics">Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/firehose/contribute/contribution">Contribute</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/firehose/roadmap">Roadmap</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_GujU"><div class="docItemContainer_Adtb"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_aoJ5"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>GRPC</h1><p><a href="https://grpc.io/" target="_blank" rel="noopener noreferrer">gRPC</a> is a modern open source high performance Remote Procedure Call framework that can run in any environment.</p><p>A GRPC sink Firehose <!-- -->(<code>SINK_TYPE</code>=<code>grpc</code>)<!-- --> requires the following variables to be set along with Generic ones</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="sink_grpc_service_host"><code>SINK_GRPC_SERVICE_HOST</code><a class="hash-link" href="#sink_grpc_service_host" title="Direct link to heading">​</a></h3><p>Defines the host of the GRPC service.</p><ul><li>Example value: <code>http://grpc-service.sample.io</code></li><li>Type: <code>required</code></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="sink_grpc_service_port"><code>SINK_GRPC_SERVICE_PORT</code><a class="hash-link" href="#sink_grpc_service_port" title="Direct link to heading">​</a></h3><p>Defines the port of the GRPC service.</p><ul><li>Example value: <code>8500</code></li><li>Type: <code>required</code></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="sink_grpc_method_url"><code>SINK_GRPC_METHOD_URL</code><a class="hash-link" href="#sink_grpc_method_url" title="Direct link to heading">​</a></h3><p>Defines the URL of the GRPC method that needs to be called.</p><ul><li>Example value: <code>com.tests.SampleServer/SomeMethod</code></li><li>Type: <code>required</code></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="sink_grpc_metadata"><code>SINK_GRPC_METADATA</code><a class="hash-link" href="#sink_grpc_metadata" title="Direct link to heading">​</a></h3><p>Defines the GRPC additional static and dynamic Metadata that allows clients to provide information to server that is associated with an RPC.
Dynamic metadata is populated by using CEL expression applied to the input payload. CEL expression should be flagged by &#x27;$&#x27; and use fully qualified package name.
Config format is CSV key-value pair, separated by colon. String, numeric, boolean are the dynamic values supported. Refer to official CEL documentation <a href="https://github.com/google/cel-spec" target="_blank" rel="noopener noreferrer">https://github.com/google/cel-spec</a>.</p><p>Note - final metadata will be generated with merging metadata and the kafka record header. </p><ul><li><p>Example value: <code>authorization:token,dlq:true,$com.goto.company.GenericPayload.field:staticvalue,$com.goto.company.GenericPayload.field_two:$(com.goto.company.GenericPayload.id + &#x27;&#x27; + com.goto.company.GenericPayload.code)</code></p></li><li><p>Type: <code>optional</code></p></li><li><p>Use case :
Example Proto</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">  package com.goto.company</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  message GenericPayload {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    string field = &quot;field_name&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    string field_two = &quot;field_two&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    string id = &quot;123&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    int code = 400;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Example config : <code>$com.goto.company.GenericPayload.field: $(com.goto.company.GenericPayload.field_two + &#x27;_&#x27; + string(com.goto.company.GenericPayload.code))</code>
This would result in : <code>field_name:field_two_400</code></p></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="sink_grpc_response_schema_proto_class"><code>SINK_GRPC_RESPONSE_SCHEMA_PROTO_CLASS</code><a class="hash-link" href="#sink_grpc_response_schema_proto_class" title="Direct link to heading">​</a></h3><p>Defines the Proto which would be the response of the GRPC Method.</p><ul><li>Example value: <code>com.tests.SampleGrpcResponse</code></li><li>Type: <code>required</code></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="sink_grpc_arg_keepalive_time_ms"><code>SINK_GRPC_ARG_KEEPALIVE_TIME_MS</code><a class="hash-link" href="#sink_grpc_arg_keepalive_time_ms" title="Direct link to heading">​</a></h3><p>The keepalive ping is a way to check if a channel is currently working by sending HTTP2 pings over the transport. It is sent periodically, and if the ping is not acknowledged by the peer within a certain timeout period, the transport is disconnected. Other keepalive configurations are described <a href="https://github.com/grpc/grpc/blob/master/doc/keepalive.md" target="_blank" rel="noopener noreferrer">here</a>.</p><p>Defines the period (in milliseconds) after which a keepalive ping is sent on the transport. If smaller than 10000, 10000 will be used instead.</p><ul><li>Example value: <code>60000</code></li><li>Type: <code>optional</code></li><li>Default value: <code>infinite</code></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="sink_grpc_arg_keepalive_timeout_ms"><code>SINK_GRPC_ARG_KEEPALIVE_TIMEOUT_MS</code><a class="hash-link" href="#sink_grpc_arg_keepalive_timeout_ms" title="Direct link to heading">​</a></h3><p>Defines the amount of time (in milliseconds) the sender of the keepalive ping waits for an acknowledgement. If it does not receive an acknowledgment within this time, it will close the connection.</p><ul><li>Example value: <code>5000</code></li><li>Type: <code>optional</code></li><li>Default value: <code>20000</code></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="sink_grpc_arg_deadline_ms"><code>SINK_GRPC_ARG_DEADLINE_MS</code><a class="hash-link" href="#sink_grpc_arg_deadline_ms" title="Direct link to heading">​</a></h3><p>Defines the amount of time (in milliseconds) gRPC clients are willing to wait for an RPC to complete before the RPC is terminated with the error <a href="https://grpc.io/docs/guides/deadlines/#:~:text=By%20default%2C%20gRPC%20does%20not,realistic%20deadline%20in%20your%20clients." target="_blank" rel="noopener noreferrer">DEADLINE_EXCEEDED</a></p><ul><li>Example value: <code>1000</code></li><li>Type: <code>optional</code></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="sink_grpc_tls_enable"><code>SINK_GRPC_TLS_ENABLE</code><a class="hash-link" href="#sink_grpc_tls_enable" title="Direct link to heading">​</a></h3><p>Indicates whether the sink needs to be connected over TLS. If set to true, the Firehose should establish a TLS connection with the SINK_GRPC_SERVICE_HOST.</p><ul><li>Example value: <code>true</code></li><li>Type: <code>optional</code></li><li>Default value: <code>false</code></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="sink_grpc_root_ca"><code>SINK_GRPC_ROOT_CA</code><a class="hash-link" href="#sink_grpc_root_ca" title="Direct link to heading">​</a></h3><p>The CA certificates for the domain *.gojek.gcp.</p><ul><li>Example value: <code>base64 encoded string</code></li><li>Type: <code>required if SINK_GRPC_TLS_ENABLE is set to true.</code></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="sink_grpc_response_retry_cel_expression"><code>SINK_GRPC_RESPONSE_RETRY_CEL_EXPRESSION</code><a class="hash-link" href="#sink_grpc_response_retry_cel_expression" title="Direct link to heading">​</a></h3><p>Defines the CEL(Common Expression Language) expression used to evaluate whether gRPC sink call should be retried or not based on the gRPC response.
The given CEL expression should evaluate to a boolean value. If the expression evaluates to true, the unsuccessful gRPC sink call will be retried, otherwise it won&#x27;t.
Currently, we support all standard CEL macro including: has, all, exists, exists_one, map, map_filter, filter
For more information about CEL please refer to this documentation : <a href="https://github.com/google/cel-spec/blob/master/doc/langdef.md" target="_blank" rel="noopener noreferrer">https://github.com/google/cel-spec/blob/master/doc/langdef.md</a></p><ul><li><p>Example value: <code>com.gotocompany.generic.GrpcResponse.success == false &amp;&amp; com.gotocompany.generic.GenericResponse.errors.exists(e, int(e.code) &gt;= 400 &amp;&amp; int(e.code) &lt;= 500)</code></p></li><li><p>Type: <code>optional</code></p></li><li><p>Default value: ``</p></li><li><p>Use cases :
Example response proto :</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">syntax = &quot;proto3&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">package com.gotocompany.generic;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  GenericResponse {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      bool success = 1;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      repeated Error errors = 2;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Error {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      string code = 1;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      string reason = 2;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Example retry rule : </p><ul><li>Retry on specific error code : <code>com.gotocompany.generic.GenericResponse.errors.exists(e, e.code == &quot;400&quot;)</code></li><li>Retry on specific error code range : <code>com.gotocompany.generic.GenericResponse.errors.exists(e, int(e.code) &gt;= 400 &amp;&amp; int(e.code) &lt;= 500)</code></li><li>Retry on error codes outside from specific error codes : <code>com.gotocompany.generic.GenericResponse.errors.exists(e, !(int(e.code) in [400, 500, 600]))</code></li><li>Disable retry on all cases : <code>false</code></li><li>Retry on all error codes : <code>true</code></li></ul></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="sink_grpc_response_retry_error_type"><code>SINK_GRPC_RESPONSE_RETRY_ERROR_TYPE</code><a class="hash-link" href="#sink_grpc_response_retry_error_type" title="Direct link to heading">​</a></h3><p>Defines the ErrorType to assign for a retryable error. This is used in conjunction with <code>SINK_GRPC_RESPONSE_RETRY_CEL_EXPRESSION</code> and <code>ERROR_TYPES_FOR_RETRY</code>.
Value must be defined in com.gotocompany.depot.error.ErrorType</p><ul><li>Example value: <code>SINK_RETRYABLE_ERROR</code></li><li>Type: <code>optional</code></li><li>Default Value: <code>DEFAULT_ERROR</code></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/goto/firehose/edit/master/docs/docs/sinks/grpc-sink.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_eYIM" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vbeJ"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/firehose/sinks/http-sink"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">HTTP</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/firehose/sinks/jdbc-sink"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">JDBC</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#sink_grpc_service_host" class="table-of-contents__link toc-highlight"><code>SINK_GRPC_SERVICE_HOST</code></a></li><li><a href="#sink_grpc_service_port" class="table-of-contents__link toc-highlight"><code>SINK_GRPC_SERVICE_PORT</code></a></li><li><a href="#sink_grpc_method_url" class="table-of-contents__link toc-highlight"><code>SINK_GRPC_METHOD_URL</code></a></li><li><a href="#sink_grpc_metadata" class="table-of-contents__link toc-highlight"><code>SINK_GRPC_METADATA</code></a></li><li><a href="#sink_grpc_response_schema_proto_class" class="table-of-contents__link toc-highlight"><code>SINK_GRPC_RESPONSE_SCHEMA_PROTO_CLASS</code></a></li><li><a href="#sink_grpc_arg_keepalive_time_ms" class="table-of-contents__link toc-highlight"><code>SINK_GRPC_ARG_KEEPALIVE_TIME_MS</code></a></li><li><a href="#sink_grpc_arg_keepalive_timeout_ms" class="table-of-contents__link toc-highlight"><code>SINK_GRPC_ARG_KEEPALIVE_TIMEOUT_MS</code></a></li><li><a href="#sink_grpc_arg_deadline_ms" class="table-of-contents__link toc-highlight"><code>SINK_GRPC_ARG_DEADLINE_MS</code></a></li><li><a href="#sink_grpc_tls_enable" class="table-of-contents__link toc-highlight"><code>SINK_GRPC_TLS_ENABLE</code></a></li><li><a href="#sink_grpc_root_ca" class="table-of-contents__link toc-highlight"><code>SINK_GRPC_ROOT_CA</code></a></li><li><a href="#sink_grpc_response_retry_cel_expression" class="table-of-contents__link toc-highlight"><code>SINK_GRPC_RESPONSE_RETRY_CEL_EXPRESSION</code></a></li><li><a href="#sink_grpc_response_retry_error_type" class="table-of-contents__link toc-highlight"><code>SINK_GRPC_RESPONSE_RETRY_ERROR_TYPE</code></a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Open DataOps Foundation © 2024</div></div></div></footer></div>
<script src="/firehose/assets/js/runtime~main.83b03c8d.js"></script>
<script src="/firehose/assets/js/main.0a799d77.js"></script>
</body>
</html>